<!DOCTYPE html>
<html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finanzas Argy</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="icon" href="https://pbs.twimg.com/profile_images/1628520220544335883/Y_USf6LP_400x400.png">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'><link rel="stylesheet" href="QuintoStyles.css">
  <style>
    body {
    font-family: -apple-system, Fira Sans, Helvetica, sans-serif;
      background-color: #161616;
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
    }
      
    .a1czirwi {
        line-height: 26px;
        margin-inline: 0px;
        font-size: 24px;
        font-family: var(--chakra-fonts-sairaCondensed);
        font-weight: var(--chakra-fontWeights-bold);
        letter-spacing: -0.13px;
        color: var(--chakra-colors-lightGray);
    }
    .card .back, .card .front {
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }
    .e34o4ue {
        flex: 1 1 0%;
        padding: 15px;
        min-width: 184px;
    }
      /* Modal styles */
      .modal {
          display: none;
          position: fixed;
          z-index: 1;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.7);
          overflow: auto;
          padding-top: 60px;
      }

      .modal-content {
          background-color: #fefefe;
          margin: 5% auto;
          padding: 20px;
          border: 1px solid #888;
          width: 80%;
          max-width: 900px;
          max-height: 70vh;
          overflow: auto;
      }

      .close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
      }

      .close:hover,
      .close:focus {
          color: black;
          text-decoration: none;
          cursor: pointer;
      }

      #priceChart {
          display: block;
          width: 100%;
          height: 100%; /* Hace que el gráfico se ajuste al contenedor */
      }

    .ttrolr {
        flex-direction: column;
        align-items: flex-start;
        position: relative;
        min-width: 0px;
        overflow-wrap: break-word;
        --card-bg: var(--chakra-colors-chakra-body-bg);
        background-color: var(--chakra-colors-lightBlack);
        box-shadow: var(--card-shadow);
        color: var(--chakra-colors-font);
        border-width: var(--card-border-width, 0);
        border-color: var(--card-border-color);
        --card-radius: var(--chakra-radii-md);
        --card-padding: var(--chakra-space-5);
        --card-shadow: var(--chakra-shadows-base);
        display: none;
        border-radius: 11px;
        width: 184px;
        height: 179px;
        margin: 0px;
    }
    .i34o4ue {
        flex: 1 1 0%;
        padding: 15px;
        min-width: 184px;
    }
    .E136815 {
        display: flex
    ;
        -webkit-box-align: center;
        align-items: center;
        margin-bottom: 8.88px;
        -webkit-box-pack: justify;
        justify-content: space-between;
        max-width: 155px;
        max-height: 30px;
    }
    .E1s3kejl {
        font-family: var(--chakra-fonts-heading);
        line-height: 1.2;
        font-size: 14px;
        text-align: left;
        font-weight: var(--chakra-fontWeights-bold);
        text-transform: lowercase;
    }
    .miniature-clock {
        position: relative;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        overflow: hidden;
        border: 1px solid #161616;
        transform: scale(.9);
    }
    .clock-face, .hand {
        position: absolute;
        top: 50%;
        left: 50%;
    }
    .a1rfoj5o {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex
    ;
        -webkit-align-items: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        font-weight: var(--chakra-fontWeights-bold);
    }
    .a1284n34 {
        background-color: var(--chakra-colors-black);
        outline-color: var(--chakra-colors-transparent);
        font-family: var(--chakra-fonts-saira);
        font-weigth: bold;
        color: rgba(0, 150, 239, 0.6);
        width: 55px;
        margin-left: 0px;
        height: 18px;
        border-radius: 3px;
        outline-style: solid;
        outline-width: 0.5px;
        font-size: 10px;
        text-align: center;
        letter-spacing: 0.24px;
        padding: 2px 5px 1.5px;
        -webkit-transition: 0.1s ease-in-out all;
        transition: 0.1s ease-in-out all;
        text-transform: uppercase;
    }
    .artprq {
        color: var(--chakra-colors-darkGray);
        font-size: 18px;
        font-family: var(--chakra-fonts-sairaCondensed);
        line-height: 0;
        font-weight: var(--chakra-fontWeights-bold);
        margin-inline: 1px;
    }
    .g0vnma {
        background-color: var(--chakra-colors-transparent);
        outline-color: var(--chakra-colors-lightBlue);
        font-family: var(--chakra-fonts-sairaSemiCondensed);
        font-weigth: semibold;
        color: var(--chakra-colors-gray);
        width: 51px;
        margin-left: -4px;
        height: 18px;
        border-radius: 3px;
        outline-style: solid;
        outline-width: 0.5px;
        font-size: 10px;
        text-align: center;
        letter-spacing: 0.24px;
        padding: 2px 5px 1.5px;
        -webkit-transition: 0.1s ease-in-out all;
        transition: 0.1s ease-in-out all;
        text-transform: uppercase;
    }
    .h6s7t7 {
        line-height: 24px;
        margin-inline: 0px;
        font-size: 22px;
        font-family: var(--chakra-fonts-sairaCondensed);
        font-weight: var(--chakra-fontWeights-semibold);
        letter-spacing: 0.3px;
        color: var(--chakra-colors-darkGray);
    }
    .ja9dku {
        display: flex
    ;
        -webkit-box-align: baseline;
        align-items: baseline;
        margin-top: 10px;
        justify-content: space-around;
    }
    .i9msno {
        display: flex
    ;
        padding: 2px 10px;
        border-radius: 3px;
        background-color: var(--chakra-colors-gray);
        color: var(--chakra-colors-lightBlack);
        -webkit-box-align: center;
        align-items: center;
        border: 1px solid;
        font-weight: var(--chakra-fontWeights-semibold);
        width: 66px;
        height: 18px;
      .cardBox {
          transition: all .3s ease 0s;
          border-radius: 11px;
          display: block;
      }
      .a4mkswm {
          display: flex
      ;
          font-size: 10px;
          font-family: var(--chakra-fonts-sairaSemiCondensed);
          -webkit-box-pack: justify;
          justify-content: space-between;
          -webkit-box-align: center;
          align-items: center;
          text-align: left;
          margin-top: 14px;
          margin-bottom: 10px;
      }
      .a135do9d {
          display: flex
      ;
          justify-content: space-around;
          -webkit-box-align: center;
          align-items: center;
      }
      .tj9yu4 {
          letter-spacing: 0.11px;
          color: var(--chakra-colors-blue);
          text-align: left;
          line-height: 13.2px;
          cursor: pointer;
          font-size: 13px;
          font-family: var(--chakra-fonts-sairaSemiCondensed);
          font-weight: var(--chakra-fontWeights-semibold);
          opacity: 0.4;
      }
      @media screen and (min-width: 48em) {
          .css-12yfeo {
              display: none;
          }
      }
      @media screen and (min-width: 30em) {
          .css-12yfeo {
              padding: 18px 19px;
          }
      }
      .cardBox .card {
          animation: giro 1.5s 1;
      }
      .card {
          transform-style: preserve-3d;
          transition: transform .4s ease 0s;
          animation: giro 1s 1;
      }
      .e70qvj9 {
          display: flex
      ;
          -webkit-box-align: center;
          align-items: center;
      }
      .emcyhi {
          margin-left: 3px;
          align-self: end;
          font-size: 11px;
          color: var(--chakra-colors-darkGray);
          font-weight: var(--chakra-fontWeights-medium);
      }
      .cardBox .card {
          animation: giro 1.5s 1;
      }
      .card {
          transform-style: preserve-3d;
          transition: transform .4s ease 0s;
          animation: giro 1s 1;
      }
  </style>
</head>
    <!-- Sección de ticker para mostrar cotizaciones en movimiento -->
      <div class="ticker-container">
        <div class="ticker" id="ticker">
          <!-- Estos elementos se generarán dinámicamente -->
        </div>
      </div>
  <div class="menu-collapsed">
     <div class="bar"></div>
     <nav>
        <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="News.html">Noticias</a></li>
        <li><a href="CriptosHome.html">Criptos</a></li>
        </ul>
     </nav>
  </div>
<body>  
  <div class="css-12gkw7z">
    <div class="css-dvxtzn"><a target="_blank" rel="noopener noreferrer" class="chakra-link css-1sojmgf" href="https://discord.gg/VK7maj2aFe"><img alt="imagen" src="https://i.postimg.cc/s2jq29jR/Hora-de-viajae-20241201-000130-0000.png" class="chakra-image css-th88q6"></a></div>
    <div class="css-4qsayy">
      <div class="css-19l7epd">
        <main class="dashboard" id="dashboard">
          </main>
      </div>
      <div class="css-1o3g8cs"><p class="chakra-text css-1scqrm2">Ultima actualización: </p><p class="chakra-text css-1fyayx3"><script>document.write(new Date().toLocaleDateString('es-AR', { day: '2-digit', month: '2-digit', year: 'numeric' }) + " - " + new Date().toLocaleTimeString('es-AR', { hour: '2-digit', minute: '2-digit' }));</script></p></div>

        <main class="dashboard" id="riesgo">
      </main>
    </div>
      <div class="css-dvxtzn"><a target="_blank" rel="noopener noreferrer" class="chakra-link css-1sojmgf" href="https://discord.gg/VK7maj2aFe"><img alt="imagen" src="https://i.postimg.cc/nrvsM6ps/Finanzas-Argy-2.gif" class="chakra-image css-th88q6"></a><ins class="adsbygoogle vertical hidden" data-ad-client="ca-pub-4916962240247997" data-ad-slot="9112822975" data-full-width-responsive="true"></ins></div>
  </div>

  <script>
    // Datos simulados para el ticker de otras cotizaciones
    const tickerData = [
      { name: 'Oro (EE.UU.)', value: '$1,945.60/oz', change: '-0.75%', trend: 'down' },
      { name: 'Petróleo (Brent)', value: '$85.20/bbl', change: '+1.10%', trend: 'up' },
      { name: 'Índice Nasdaq', value: '14,350.50 pts', change: '+0.45%', trend: 'up' },
      { name: 'Bitcoin', value: '$29,580', change: '-1.25%', trend: 'down' }
    ];

      const currencies = [
          { name: 'Dólar', sell: '0.00', buy: '0.00', change: '0.00%', time: '00/00/00 - 00:00', trend: '' },
          { name: 'Euro', sell: '0.00', buy: '0.00', change: '0.00%', time: '00/00/00 - 00:00', trend: '' },
      ];

      const riesgos = [
          { name: 'RIESGO PAÍS', sell: '0.00' , change: '0.00%', time: '00/00/00 - 00:00', trend: '' },
      ];

      const criptoscoins = [
            { name: 'ArgyCripto', sell: '0.00' , change: '0.00%', time: '00/00/00 - 00:00', trend: '' },
        ];

      const ticker = document.getElementById('ticker');
      const dashboard = document.getElementById('dashboard');
      const riesgo = document.getElementById('riesgo');
      const cripto = document.getElementById('riesgo');

      // Función para crear el ticker de cotizaciones
      currencies.forEach(currency => {
          const card = document.createElement('div');
          card.classList.add('currency-card'); // Añadimos la clase para el estilo

          // Asignamos el HTML a la tarjeta
          card.innerHTML = `
              <div class="header">
                  <h3>${currency.name}</h3>
                  <span class="status-indicator ${currency.trend === 'up' ? 'up' : (currency.trend === 'down' ? 'down' : 'neutral')}"></span>
              </div>
              <div class="prices">
                  <div class="price">
                      <span>Venta</span>
                      <strong>$${currency.sell}</strong> <!-- Aquí mostramos la cotización de venta -->
                  </div>
                  <p class="chakra-text css-artprq">/</p>
                  <div class="buy">
                      <span>Compra</span>
                      <strong>$${currency.buy}</strong> <!-- Aquí mostramos la cotización de compra -->
                  </div>
              </div>
              <div class="trend">
                  <span class="change ${currency.trend}%">${currency.change}</span> <!-- Mostrar el cambio -->
                  <span class="ultimavez">${currency.time}</span> <!-- Mostrar la última actualización -->
              </div>
          `;

          // Añadimos la tarjeta al contenedor de monedas
          dashboard.appendChild(card);
      });

      riesgos.forEach(riesgoItem => {
          const card = document.createElement('div');
          card.classList.add('riesgo-card');
          card.innerHTML = `
              <div class="header">
                  <h15>${riesgoItem.name}</h15>
                  <span class="status-indicator2 ${riesgo.trend === 'up2' ? 'up2' : (riesgo.trend === 'down2' ? 'down2' : 'neutral')}"></span>
              </div>
              <div class="riesgo4">
                  <div class="priceriesgo">
                      <span2>${riesgo.sell}</span2>
                  </div>
              </div>
              <div class="trend">
                  <span class="change2 ${riesgo.trend}">${riesgoItem.change}</span>
                  <span class="ultimavez">${riesgo.time}</span>
              </div>
          `;
          riesgo.appendChild(card);
      });

        criptoscoins.forEach(CriptoItem => {
            const card = document.createElement('div');
            card.classList.add('cripto-card-argy');
            card.innerHTML = `
                <div class="header">
                    <h15>${CriptoItem.name}</h15>
                    <span class="status-indicator2 ${CriptoItem.trend === 'up' ? 'up' : (CriptoItem.trend === 'down' ? 'down' : 'neutral')}"></span>
                </div>
                <div class="riesgo4">
                    <div class="priceriesgo">
                        <span2>${CriptoItem.sell}</span2>
                    </div>
                </div>
                <div class="trend">
                    <span class="change2 ${CriptoItem.trend}">${CriptoItem.change}</span>
                    <span class="ultimavez">${CriptoItem.time}</span>
                </div>
            `;
              cripto.appendChild(card);
        });

      // Función para actualizar las cotizaciones

      // Función para obtener los datos desde la API
      async function fetchAPIData() {
          try {
              const response = await fetch('https://apimocha.com/cotization/DolarGrafic');
              if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
              const apiData = await response.json();
              return apiData;
          } catch (error) {
              console.error("Error fetching data from API:", error);
              return []; // Retornar un array vacío en caso de error
          }
      }
      
      async function updateCurrencies() {
          const apiUrl = 'https://apimocha.com/cotization/cotizacion'; // Cambia por tu clave de API

          try {
              const response = await fetch(apiUrl);
              const data = await response.json();

              // Obtener la tasa previa desde la API
              const prev1RateEUR = parseFloat(data.previous.EUR.toFixed(2)); // Cambio de previus a previous
              const prev1RateUSD = parseFloat(data.previous.USDTU1.toFixed(2)); // Cambio de previus a previous


              // Obtener la nueva tasa desde la API
              const cur2RateEUR = parseFloat(data.conversion_rates.EUR.toFixed(2));
              const cur2RateUSD = parseFloat(data.conversion_rates.USDTU.toFixed(2));

              // Actualizar las cotizaciones para cada moneda
              currencies[0].sell = data.conversion_rates.USDTU.toFixed(2); // Ejemplo: cotización de venta (con un incremento de 2%)
              currencies[0].buy = (data.conversion_rates.USDTU * 0.90).toFixed(2); // Ejemplo: cotización de compra
              currencies[0].time = new Date(data.time_last_update_unix * 1000).toLocaleString(); // Última actualización
              currencies[0].change = (cur2RateUSD - prev1RateUSD).toFixed(2);
              currencies[0].trend = cur2RateUSD > prev1RateUSD ? 'up' : (cur2RateUSD < prev1RateUSD ? 'down' : 'neutral');

              currencies[1].sell = data.conversion_rates.EUR.toFixed(2);
              currencies[1].buy = (data.conversion_rates.EUR * 0.90).toFixed(2);
              currencies[1].time = new Date(data.time_last_update_unix * 1000).toLocaleString(); // Última actualización
              currencies[1].change = (cur2RateEUR - prev1RateEUR).toFixed(2); // Calcula el cambio
              currencies[1].trend = cur2RateEUR > prev1RateEUR ? 'up' : (cur2RateEUR < prev1RateEUR ? 'down' : 'neutral');

              console.log(currencies); // Para verificar si los datos se actualizan correctamente

              // Llamamos a la función para re-renderizar las tarjetas
              renderCurrencies();
          } catch (error) {
              console.error('Error al actualizar las cotizaciones:', error);
          }
      }

      // Función para renderizar las tarjetas con las cotizaciones actualizadas
      function renderCurrencies() {
          // Limpiar las tarjetas anteriores
          dashboard.innerHTML = '';

          // Crear las nuevas tarjetas con los datos actualizados
          currencies.forEach(currency => {
              const card = document.createElement('div');
              card.classList.add('currency-card'); // Añadir la clase para el estilo

              // Asignamos el HTML actualizado
              card.innerHTML = `
                  <div class="header" id="header-${currency.name}">
                      <h3>${currency.name}</h3>
                      <span class="status-indicator ${currency.trend === 'up' ? 'up' : (currency.trend === 'down' ? 'down' : 'neutral')}"></span>
                  </div>
                  <div class="prices">
                      <div class="price">
                          <span>Venta</span>
                          <strong>$${currency.sell}</strong> <!-- Actualización de la cotización de venta -->
                      </div>
                      <p class="chakra-text css-artprq">/</p>
                      <div class="buy">
                          <span>Compra</span>
                          <strong>$${currency.buy}</strong> <!-- Actualización de la cotización de compra -->
                      </div>
                  </div>
                  <div class="trend">
                      <span class="change ${currency.trend}">
                          ${currency.trend === 'up' ? '↑' : (currency.trend === 'down' ? '↓' : '↔')} 
                          ${currency.change}</span>
                      <span class="ultimavez">${currency.time}</span> <!-- Hora de la última actualización -->
                  </div>

                  <!-- Contenedor del gráfico oculto inicialmente -->
                  <div id="chart-container-${currency.name}" class="chart-container" style="display:none; height: 400px; width: 100%;"></div>
              `;

              // Añadir la nueva tarjeta al contenedor
              dashboard.appendChild(card);

              // Obtener el contenedor del gráfico y el header
              const chartContainer = document.getElementById(`chart-container-${currency.name}`);
              const header = document.getElementById(`header-${currency.name}`);

              let apiUrl;

                if (currency.name === 'Dólar') {
                    apiUrl = 'https://apimocha.com/cotization/DolarGrafic';
                } else if (currency.name === 'Euro') {
                    apiUrl = 'https://apimocha.com/cotization/EuroGraphic';
                }

              // Mostrar u ocultar el gráfico al hacer clic en el header
              header.addEventListener('click', () => {
                  if (chartContainer.style.display === 'none') {
                      chartContainer.style.display = 'block'; // Mostrar el gráfico
                      const apiUrl = currency.name === 'Dólar' 
                          ? 'https://apimocha.com/cotization/DolarGrafic'
                          : 'https://apimocha.com/cotization/EuroGraphic';
                      createChart(apiUrl, chartContainer); // Pasa la URL a la función
                  } else {
                      chartContainer.style.display = 'none'; // Ocultar el gráfico
                  }
              });
          });
      }

      // Función para crear el gráfico
      // Función para crear el gráfico
      async function createChart(apiUrl, chartContainer) {
          // Verificar si el gráfico ya existe, para evitar recrearlo
          if (chartContainer.chart) return;

          // Crear el gráfico de velas
          const chart = LightweightCharts.createChart(chartContainer, {
              width: chartContainer.offsetWidth,
              height: chartContainer.offsetHeight,
              layout: { backgroundColor: '#1e1e1e', textColor: '#d1d4dc' },
              grid: { vertLines: { color: '#2b2b2b' }, horzLines: { color: '#2b2b2b' } },
              timeScale: { borderColor: '#485c7b', timeVisible: true, secondsVisible: true },
              rightPriceScale: { borderColor: '#485c7b' },
          });

          // Serie de velas
          const candlestickSeries = chart.addCandlestickSeries({
              upColor: '#26a69a',
              downColor: '#ef5350',
              borderVisible: false,
              wickUpColor: '#26a69a',
              wickDownColor: '#ef5350',
          });

          try {
              // Obtener datos desde la API
              const response = await fetch(apiUrl);
              if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
              const apiData = await response.json();

              // Transformar los datos de la API al formato requerido
              const candlestickData = apiData.map(d => ({
                  time: new Date(d.time).getTime() / 1000, // Convertir a UNIX timestamp
                  open: d.open,
                  high: d.high,
                  low: d.low,
                  close: d.close,
              }));

              // Configurar el gráfico con los datos de la API
              candlestickSeries.setData(candlestickData);

              // Guardar el gráfico en el contenedor para evitar duplicados
              chartContainer.chart = chart;
          } catch (error) {
              console.error("Error fetching or processing chart data:", error);
          }
      }


// RISEGO
      // Valores previos de las tasas iniciales

      async function updateRiesgo() {
          const apiUrl = 'https://apimocha.com/cotization/cotizacion'; // Cambia por tu clave de API

          try {
              const response = await fetch(apiUrl);
              const data = await response.json();

              // Obtener la tasa previa desde la API
              const previous4Rate = parseFloat(data.previous.RIEPREVIUS.toFixed(2));
              const current4Rate = parseFloat(data.conversion_rates.RIE.toFixed(2));


              // Actualizar la información de riesgo
              riesgos[0].sell = current4Rate; // Nueva cotización
              riesgos[0].time =  new Date(data.time_last_update_unix * 1000).toLocaleString(); // Última actualización
              riesgos[0].change = (current4Rate - previous4Rate).toFixed(2); // Calcula el cambio
              riesgos[0].trend = current4Rate > previous4Rate ? 'up2' : (current4Rate < previous4Rate ? 'down2' : 'neutral'); // Define la tendencia

              console.log(riesgos); // Para verificar si los datos se actualizan correctamente

              // Llamar a la función para re-renderizar las tarjetas
              renderRiesgo();
          } catch (error) {
              console.error('Error al actualizar el Riesgo Pais:', error)
          }
      }

      // Función para renderizar las tarjetas con las cotizaciones actualizadas
      function renderRiesgo() {
          // Limpiar las tarjetas anteriores
          riesgo.innerHTML = '';

          // Crear las nuevas tarjetas con los datos actualizados
          riesgos.forEach(riesgoItem => {
              const card = document.createElement('div');
              card.classList.add('riesgo-card');
              card.innerHTML = `
                  <div class="header">
                      <h15>${riesgoItem.name}</h15>
                      <span class="status-indicator2 ${riesgoItem.trend}"></span>
                  </div>
                  <div class="riesgo4">
                      <div class="priceriesgo">
                          <span2>${riesgoItem.sell}</span2>
                      </div>
                  </div>
                  <div class="trend">
                      <span class="change2 ${riesgoItem.trend}">
                          ${riesgoItem.trend === 'up2' ? '↑' : (riesgoItem.trend === 'down2' ? '↓' : '↔')} 
                          ${riesgoItem.change}
                      </span>
                      <span class="ultimavez">${riesgoItem.time}</span>
                  </div>
              `;
              riesgo.appendChild(card);
          });
      }



      async function updateCripto() {
            const apiUrlCriptos = 'https://apimocha.com/cotization/cripto-argy'; // Cambia por tu clave de API
            const apiUrl = 'https://apimocha.com/cotization/cotizacion'; // Cambia por tu clave de API

          
          

            try {
                const responseCriptos = await fetch(apiUrlCriptos);
                const dataCriptos = await responseCriptos.json();

                const response = await fetch(apiUrl);
                const data = await response.json();

                const lastEntry = dataCriptos[dataCriptos.length - 1];
                const secondLastEntry = dataCriptos[dataCriptos.length - 2];

                // Obtener la tasa previa desde la API

                const previouscripto = parseFloat(secondLastEntry.close); // Penúltimo precio
                const currentcripto = parseFloat(lastEntry.close); // Último precio

                // Actualizar la información de riesgo
                criptoscoins[0].sell = currentcripto; // Nueva cotización
                criptoscoins[0].time =  new Date(data.time_last_update_unix * 1000).toLocaleString(); // Última actualización
                criptoscoins[0].change = ((currentcripto - previouscripto) / previouscripto * 100 / 100).toFixed(2); // Variación en porcentaje
                criptoscoins[0].trend = currentcripto > previouscripto ? 'up' : (currentcripto < previouscripto ? 'down' : 'neutral'); // Define la tendencia



                console.log(criptoscoins); // Para verificar si los datos se actualizan correctamente

                // Llamar a la función para re-renderizar las tarjetas
                renderCripto();
            } catch (error) {
                console.error('Error al actualizar CriptoCoins:', error)
            }
        }

        // Función para renderizar las tarjetas con las cotizaciones actualizadas
        function renderCripto() {

            // Crear las nuevas tarjetas con los datos actualizados
            criptoscoins.forEach(riesgoItem => {
                const card = document.createElement('div');
                card.classList.add('cripto-card-argy');
                card.innerHTML = `
                <div class="header">
                    <img alt="Cotización Dólar Letsbit" src="https://pbs.twimg.com/profile_images/1628520220544335883/Y_USf6LP_400x400.png" class="chakra-image css-bielb8">
                        <h15>${riesgoItem.name}</h15>
                        <span class="status-indicator ${riesgoItem.trend}"></span>
                    </div>
                    <div class="riesgo4">
                        <div class="priceriesgo">
                            <span2> $${riesgoItem.sell}</span2>
                        </div>
                    </div>
                    <div class="trend">
                        <span class="change ${riesgoItem.trend}">
                            ${riesgoItem.trend === 'up' ? '↑' : (riesgoItem.trend === 'down' ? '↓' : '↔')} 
                            ${riesgoItem.change}
                        </span>
                        <span class="ultimavez">${riesgoItem.time}</span>
                    </div>
                `;
                riesgo.appendChild(card);
            });
        }


      

      // Llamar a la función para actualizar las cotizaciones al cargar la página
      updateRiesgo()
      updateCripto()
      updateCurrencies()
  </script>
</body>
  <script>

      const localData = [
          { time: "2024-11-16 00:15:00", open: 28.00, high: 31.26, low: 28.79, close: 28.82, volume: 0.0},
          { time: "2024-11-17 00:15:00", open: 28.82, high: 30.30, low: 29.30, close: 30.15, volume: 0.0},
          { time: "2024-11-18 00:15:00", open: 28.82, high: 30.30, low: 29.30, close: 30.15, volume: 0.0},
          { time: "2024-11-19 00:15:00", open: 30.15, high: 30.20, low: 28.90, close: 29.43, volume: 0.0},
          { time: "2024-11-20 00:15:00", open: 29.43, high: 30.05, low: 28.20, close: 28.44, volume: 0.0},
          { time: "2024-11-21 00:15:00", open: 28.44, high: 34.50, low: 29.00, close: 32.65, volume: 0.0},
          { time: "2024-11-22 00:15:00", open: 32.65, high: 39.50, low: 30.50, close: 37.20, volume: 0.0},
          { time: "2024-11-23 00:15:00", open: 37.20, high: 37.00, low: 31.50, close: 36.85, volume: 0.0},
          { time: "2024-11-25 00:15:00", open: 36.85, high: 35.50, low: 29.00, close: 32.50, volume: 0.0},
          { time: "2024-11-26 00:15:00", open: 32.50, high: 35.00, low: 28.90, close: 33.30, volume: 0.0},
          { time: "2024-11-27 00:15:00", open: 33.30, high: 34.30, low: 29.90, close: 32.20, volume: 0.0},
          { time: "2024-11-28 00:15:00", open: 32.20, high: 32.50, low: 28.95, close: 31.15, volume: 0.0},
          { time: "2024-11-29 00:15:00", open: 31.15, high: 31.20, low: 30.90, close: 31.20, volume: 0.0},
      ];

      
  </script>
  <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script><script  src="Quinto.js"></script>
  <script src="https://unpkg.com/lightweight-charts@3.4.0/dist/lightweight-charts.standalone.production.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</html>
